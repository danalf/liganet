{% extends 'LiganetCoreBundle::base.html.twig' %}
{% block content %}
<div class="row-fluid">
    <div class="span11">
        <div class="page-header">
            <h1>{{ entity.liga }} {{ entity.saison }} 
                <small>{{ entity.liga.region }}</small>
            </h1>
            <p>{{ entity.bemerkung }}</p>
        </div>
    </div>
    <div class="span1">
        <a class="btn" href="{{ path('ligasaison') }}">
            <i class="icon-list"></i>
        </a>
        {% if isGrantedEdit == true %}
        <a class="btn" href="{{ path('ligasaison_edit', { 'id': entity.id }) }}">
            <i class="icon-pencil"></i>
        </a>
        {% endif %}
        {% if is_granted('ROLE_ADMIN') %}
        <form  action="{{ path('ligasaison_delete', { 'id': entity.id }) }}" method="post">
            {{ form_widget(delete_form) }}
                <button  class="btn"  type="submit"><i class="icon-trash"></i></button>
            </form>
        {% endif %}
        </div>
    </div>
    <div class="row-fluid">
        <div class="span3">
            <h2>Allgemein</h2>
            <table class="table">
                <tr>
                    <th>Staffelleitung</th>
                    <td>
                                {% for leiter in entity.staffelleiter %}
                            <a href="{{ path('spieler_show', { 'id': leiter.id }) }}">{{ leiter }}</a><br />
                                {% endfor %}
                        </td>  
                    </tr>
                    <tr>
                        <th>gesperrt</th>
                        <td>
                {% if entity.gesperrt > 0 %}
                                <i class="icon-ok"></i>
                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <th>Aktuell</th>
                            <td>
                {% if entity.actual > 0 %}
                                    <i class="icon-ok"></i>
                {% endif %}
                                </td>
                            </tr>
            {% if (entity.gesperrt == false) and (isGrantedEdit == true) %}
                            <tr>
                                <th>Liga losen</th>
                                <td><a class="btn pull-right" href="{{ path('ligasaison_losung', { 'id': entity.id }) }}"> <i class="icon-random"></i></a></td>  
                            </tr>
                {% endif %}
                    {% if  isGrantedEdit == true %}
                            <tr>
                                <th>Spielberichtsbogen</th>
                                <td><a class="btn pull-right" href="{{ path('ligasaison_pdf_spielberichtsbogen', { 'id': entity.id }) }}"><i class=" icon-download-alt"></i></a> </td>
                            </tr>
                            <tr>
                                <th>Spielermeldebogen</th>
                                <td><a class="btn pull-right" href="{{ path('ligasaison_pdf_spielermeldebogen', { 'id': entity.id }) }}"><i class=" icon-download-alt"></i></a> </td>
                            </tr>
                    {% endif %}


                        </table>
                    </div>
                    <div class="span3">
                        <h2>Mannschaften</h2>
                        <table class="table">
                    {% for mannschaft in entity.mannschaften %}
                                <tr>
                                    <td>
                    {% if mannschaft.verein.document %}
                                            <img class="media-object" alt="Logo {{ mannschaft.verein }}" src="{{ asset(mannschaft.verein.document.webpath) }}" style="height: 32px" />
                    {% endif %}
                                        </td>
                                        <td>{{ mannschaft.verein }} {{ mannschaft.rang }}</td>
                                        <td>
                                            <a class="btn pull-right" href="{{ path('mannschaft_show', { 'id': mannschaft.id }) }}">
                                                <i class="icon-arrow-right"></i>
                                            </a>
                                        </td>
                                    </tr>
                    {% endfor %}
                                </table>
                            </div>
                            <div class="span6">
                {% render "LiganetCoreBundle:Spieltag:showList" with { 'ligasaison_id': entity.id } %}
                                </div>
                            </div>
{% endblock %}
